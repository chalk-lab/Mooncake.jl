<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Developer Tools · Mooncake.jl</title><meta name="title" content="Developer Tools · Mooncake.jl"/><meta property="og:title" content="Developer Tools · Mooncake.jl"/><meta property="twitter:title" content="Developer Tools · Mooncake.jl"/><meta name="description" content="Documentation for Mooncake.jl."/><meta property="og:description" content="Documentation for Mooncake.jl."/><meta property="twitter:description" content="Documentation for Mooncake.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Mooncake.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Mooncake.jl</a></li><li><a class="tocitem" href="../../tutorial/">Tutorial</a></li><li><span class="tocitem">Understanding Mooncake.jl</span><ul><li><a class="tocitem" href="../../understanding_mooncake/introduction/">Introduction</a></li><li><a class="tocitem" href="../../understanding_mooncake/algorithmic_differentiation/">Algorithmic Differentiation</a></li><li><a class="tocitem" href="../../understanding_mooncake/rule_system/">Mooncake.jl&#39;s Rule System</a></li></ul></li><li><span class="tocitem">Utilities</span><ul><li><a class="tocitem" href="../../utilities/defining_rules/">Defining Rules</a></li><li><a class="tocitem" href="../../utilities/debug_mode/">Debug Mode</a></li><li><a class="tocitem" href="../../utilities/debugging_and_mwes/">Debugging and MWEs</a></li></ul></li><li><span class="tocitem">Developer Documentation</span><ul><li><a class="tocitem" href="../running_tests_locally/">Running Tests Locally</a></li><li class="is-active"><a class="tocitem" href>Developer Tools</a></li><li><a class="tocitem" href="../forwards_mode_design/">Forwards-Mode Design</a></li><li><a class="tocitem" href="../misc_internals_notes/">Misc. Internals Notes</a></li><li><a class="tocitem" href="../internal_docstrings/">Internal Docstrings</a></li></ul></li><li><a class="tocitem" href="../../known_limitations/">Known Limitations</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Developer Documentation</a></li><li class="is-active"><a href>Developer Tools</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Developer Tools</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/compintell/Mooncake.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/compintell/Mooncake.jl/blob/main/docs/src/developer_documentation/developer_tools.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Developer-Tools"><a class="docs-heading-anchor" href="#Developer-Tools">Developer Tools</a><a id="Developer-Tools-1"></a><a class="docs-heading-anchor-permalink" href="#Developer-Tools" title="Permalink"></a></h1><p>Mooncake.jl offers developers to a few convenience functions which give access to the IR that it generates in order to perform AD. These are lightweight wrappers around internals which save you from having to dig in to the objects created by <code>build_rrule</code>.</p><p>Since these provide access to internals, they do not follow the usual rules of semver, and may change without notice!</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Mooncake.primal_ir" href="#Mooncake.primal_ir"><code>Mooncake.primal_ir</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">primal_ir(sig::Type{&lt;:Tuple}; interp=get_interpreter())::IRCode</code></pre><p>!!! warning: this is not part of the public interface of Mooncake. As such, it may change as part of a non-breaking release of the package.</p><p>Get the <code>Core.Compiler.IRCode</code> associated to <code>sig</code> from which the a rule can be derived. Roughly equivalent to <code>Base.code_ircode_by_type(sig; interp)</code>.</p><p>For example, if you wanted to get the IR associated to the call <code>map(sin, randn(10))</code>, you could do one of the following calls:</p><pre><code class="language-julia-repl hljs">julia&gt; Mooncake.primal_ir(Tuple{typeof(map), typeof(sin), Vector{Float64}}) isa Core.Compiler.IRCode
true
julia&gt; Mooncake.primal_ir(typeof((map, sin, randn(10)))) isa Core.Compiler.IRCode
true</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/compintell/Mooncake.jl/blob/2f9778faa1c97010ea285cdf4f080ecc2686572c/src/developer_tools.jl#L1-L18">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Mooncake.fwd_ir" href="#Mooncake.fwd_ir"><code>Mooncake.fwd_ir</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">fwd_ir(
    sig::Type{&lt;:Tuple};
    interp=get_interpreter(), debug_mode::Bool=false, do_inline::Bool=true
)::IRCode</code></pre><p>!!! warning: this is not part of the public interface of Mooncake. As such, it may change as part of a non-breaking release of the package.</p><p>Generate the <code>Core.Compiler.IRCode</code> used to construct the forwards-pass of AD. Take a look at how <code>build_rrule</code> makes use of <code>generate_ir</code> to see exactly how this is used in practice.</p><p>For example, if you wanted to get the IR associated to the forwards pass for the call <code>map(sin, randn(10))</code>, you could do either of the following:</p><pre><code class="language-julia-repl hljs">julia&gt; Mooncake.fwd_ir(Tuple{typeof(map), typeof(sin), Vector{Float64}}) isa Core.Compiler.IRCode
true
julia&gt; Mooncake.fwd_ir(typeof((map, sin, randn(10)))) isa Core.Compiler.IRCode
true</code></pre><p><strong>Arguments</strong></p><ul><li><code>sig::Type{&lt;:Tuple}</code>: the signature of the call to be differentiated.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>interp</code>: the interpreter to use to obtain the primal IR.</li><li><code>debug_mode::Bool</code>: whether the generated IR should make use of Mooncake&#39;s debug mode.</li><li><code>do_inline::Bool</code>: whether to apply an inlining pass prior to returning the ir generated   by this function. This is <code>true</code> by default, but setting it to <code>false</code> can sometimes be   helpful if you need to understand what function calls are generated in order to perform   AD, before lots of it gets inlined away.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/compintell/Mooncake.jl/blob/2f9778faa1c97010ea285cdf4f080ecc2686572c/src/developer_tools.jl#L23-L54">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Mooncake.rvs_ir" href="#Mooncake.rvs_ir"><code>Mooncake.rvs_ir</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">rvs_ir(
    sig::Type{&lt;:Tuple};
    interp=get_interpreter(), debug_mode::Bool=false, do_inline::Bool=true
)::IRCode</code></pre><p>!!! warning: this is not part of the public interface of Mooncake. As such, it may change as part of a non-breaking release of the package.</p><p>Generate the <code>Core.Compiler.IRCode</code> used to construct the reverse-pass of AD. Take a look at how <code>build_rrule</code> makes use of <code>generate_ir</code> to see exactly how this is used in practice.</p><p>For example, if you wanted to get the IR associated to the reverse pass for the call <code>map(sin, randn(10))</code>, you could do either of the following:</p><pre><code class="language-julia-repl hljs">julia&gt; Mooncake.rvs_ir(Tuple{typeof(map), typeof(sin), Vector{Float64}}) isa Core.Compiler.IRCode
true
julia&gt; Mooncake.rvs_ir(typeof((map, sin, randn(10)))) isa Core.Compiler.IRCode
true</code></pre><p><strong>Arguments</strong></p><ul><li><code>sig::Type{&lt;:Tuple}</code>: the signature of the call to be differentiated.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>interp</code>: the interpreter to use to obtain the primal IR.</li><li><code>debug_mode::Bool</code>: whether the generated IR should make use of Mooncake&#39;s debug mode.</li><li><code>do_inline::Bool</code>: whether to apply an inlining pass prior to returning the ir generated   by this function. This is <code>true</code> by default, but setting it to <code>false</code> can sometimes be   helpful if you need to understand what function calls are generated in order to perform   AD, before lots of it gets inlined away.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/compintell/Mooncake.jl/blob/2f9778faa1c97010ea285cdf4f080ecc2686572c/src/developer_tools.jl#L64-L95">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../running_tests_locally/">« Running Tests Locally</a><a class="docs-footer-nextpage" href="../forwards_mode_design/">Forwards-Mode Design »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.1 on <span class="colophon-date" title="Saturday 15 February 2025 10:46">Saturday 15 February 2025</span>. Using Julia version 1.11.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
